# μ¤ν”„λ§ ν•µμ‹¬ μ›λ¦¬ μ΄ν•΄
[1. κ°μ²΄ μ§€ν–¥ μ„¤κ³„μ™€ μ¤ν”„λ§](#1.-κ°μ²΄-μ§€ν–¥-μ„¤κ³„μ™€-μ¤ν”„λ§)

[2. μ¤ν”„λ§ ν•µμ‹¬ μ›λ¦¬ μ΄ν•΄ 1 (μμ  λ§λ“¤κΈ°)](#2.-μ¤ν”„λ§-ν•µμ‹¬-μ›λ¦¬-μ΄ν•΄-1-(μμ -λ§λ“¤κΈ°))

[3. μ¤ν”„λ§ ν•µμ‹¬ μ›λ¦¬ μ΄ν•΄ 2 (κ°μ²΄ μ§€ν–¥ μ›λ¦¬ μ μ©)](#2.-μ¤ν”„λ§-ν•µμ‹¬-μ›λ¦¬-μ΄ν•΄-2-(κ°μ²΄-μ§€ν–¥-μ›λ¦¬-μ μ©))

## 1. κ°μ²΄ μ§€ν–¥ μ„¤κ³„μ™€ μ¤ν”„λ§

### μ¤ν”„λ§μ΄λ€?
* μ¤ν”„λ§ ν”„λ μ„μ›ν¬, μ¤ν”„λ§ λ¶€νΈ λ“±μ„ ν¬ν•¨ν• μ¤ν”„λ§ μƒνƒκ³„ μ „μ²΄λ¥Ό μ•„μ°λ¥΄λ” λ§.
* μ¤ν”„λ§λ¶€νΈ?
  * μ¤ν”„λ§μ„ νΈλ¦¬ν•κ² μ‚¬μ©ν•  μ μλ„λ΅ μ§€μ›
  * Tomcat κ°™μ€ μ›Ήμ„λ²„λ¥Ό λ‚΄μ¥, λ³„λ„μ μ›Ήμ„λ²„λ¥Ό μ„¤μΉν•  ν•„μ” x
  * starter μΆ…μ†μ„± μ κ³µμΌλ΅ μ‰¬μ΄ λΉλ“ κµ¬μ„± κ°€λ¥
  * ν”„λ΅λ•μ… μ¤€λΉ„ κΈ°λ¥ μ κ³µ
  * κ΄€λ΅€μ— μν• κ°„κ²°ν• μ„¤μ • 
* μ¤ν”„λ§μ ν•µμ‹¬
  * μ¤ν”„λ§μ€ μλ°” μ–Έμ–΄ κΈ°λ°μ ν”„λ μ„μ›ν¬λ΅ κ°μ²΄ μ§€ν–¥ μ–Έμ–΄κ°€ κ°€μ§„ κ°•λ ¥ν• νΉμ§•μ„ μ‚΄λ ¤λ‚Ό μ μλ” ν”„λ μ„μ›ν¬.
### μΆ‹μ€ κ°μ²΄ μ§€ν–¥ ν”„λ΅κ·Έλλ°μ΄λ€?
* κ°μ²΄ μ§€ν–¥ ν”„λ΅κ·Έλλ°
> κ°μ²΄ μ§€ν–¥ ν”„λ΅κ·Έλλ°μ€ μ»΄ν“¨ν„° ν”„λ΅κ·Έλ¨μ„ λ…λ Ήμ–΄μ λ©λ΅μΌλ΅ λ³΄λ” μ‹κ°μ—μ„ λ²—μ–΄λ‚ μ—¬λ¬ κ°μ λ…λ¦½λ λ‹¨μ„, μ¦‰ "κ°μ²΄"λ“¤μ λ¨μ„μΌλ΅ νμ•…ν•κ³ μ ν•λ” κ²ƒμ΄λ‹¤. κ°κ°μ κ°μ²΄λ” λ©”μ‹μ§€ λ¥Ό μ£Όκ³ λ°›κ³ , λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•  μ μλ‹¤. 
κ°μ²΄ μ§€ν–¥ ν”„λ΅κ·Έλλ°μ€ ν”„λ΅κ·Έλ¨μ„ **μ μ—°**ν•κ³  **λ³€κ²½μ΄ μ©μ΄**ν•κ² λ§λ“¤κΈ° λ•λ¬Έμ— λ€κ·λ¨ μ†ν”„νΈμ›¨μ–΄ κ°λ°μ— λ§μ΄ μ‚¬μ©λλ‹¤.

* μ μ—°ν•κ³  λ³€κ²½μ΄ μ©μ΄ --> λ‹¤ν•μ„±

### λ‹¤ν•μ„±
* μ—­ν• κ³Ό κµ¬ν„. μΈν„°νμ΄μ¤μ™€ κµ¬ν„ κ°μ²΄. 
>ν΄λΌμ΄μ–ΈνΈλ” λ€μƒμ μ—­ν• (μΈν„°νμ΄μ¤)λ§ μ•λ©΄ λλ‹¤.\
ν΄λΌμ΄μ–ΈνΈλ” κµ¬ν„ λ€μƒμ λ‚΄λ¶€ κµ¬μ΅°λ¥Ό λ°λΌλ„ λλ‹¤.\
ν΄λΌμ΄μ–ΈνΈλ” κµ¬ν„ λ€μƒμ λ‚΄λ¶€ κµ¬μ΅°κ°€ λ³€κ²½λμ–΄λ„ μν–¥μ„ λ°›μ§€ μ•λ”λ‹¤.\
ν΄λΌμ΄μ–ΈνΈλ” κµ¬ν„ λ€μƒ μμ²΄λ¥Ό λ³€κ²½ν•΄λ„ μν–¥μ„ λ°›μ§€ μ•λ”λ‹¤.

κ°μ²΄λ¥Ό μ„¤κ³„ν•  λ• μ—­ν• κ³Ό κµ¬ν„μ„ λ…ν™•ν λ¶„λ¦¬

κ°μ²΄ μ„¤κ³„μ‹ μ—­ν• (μΈν„°νμ΄μ¤)μ„ λ¨Όμ € λ¶€μ—¬ν•κ³ , κ·Έ μ—­ν• μ„ μν–‰ν•λ” κµ¬ν„ κ°μ²΄ λ§λ“ λ‹¤.

### λ‹¤ν•μ„±μ λ³Έμ§
- **μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• κ°μ²΄ μΈμ¤ν„΄μ¤λ¥Ό μ‹¤ν–‰ μ‹μ μ— μ μ—°ν•κ² λ³€κ²½ν•  μ μλ‹¤.**
- **ν΄λΌμ΄μ–ΈνΈλ¥Ό λ³€κ²½ν•μ§€ μ•κ³ , μ„λ²„μ κµ¬ν„ κΈ°λ¥μ„ μ μ—°ν•κ² λ³€κ²½ν•  μ μλ‹¤.**

***
### μΆ‹μ€ κ°μ²΄ μ§€ν–¥ μ„¤κ³„μ 5κ°€μ§€ μ›μΉ™(SOLID)
- SRP: λ‹¨μΌ μ±…μ„ μ›μΉ™(single responsibility principle)
  - ν•λ‚μ ν΄λμ¤λ” ν•λ‚μ μ±…μ„λ§ κ°€μ Έμ•Ό ν•λ‹¤. 
- OCP: κ°λ°©-νμ‡„ μ›μΉ™ (Open/closed principle)
  - μ†ν”„νΈμ›¨μ–΄ μ”μ†λ” ν™•μ¥μ—λ” μ—΄λ ¤ μμΌλ‚ λ³€κ²½μ—λ” λ‹«ν€ μμ–΄μ•Ό ν•λ‹¤.
  - λ‹¤ν•μ„± μ΄μ©: μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• μƒλ΅μ΄ ν΄λμ¤λ¥Ό ν•λ‚ λ§λ“¤μ–΄μ„ μƒλ΅μ΄ κΈ°λ¥μ„ κµ¬ν„. -> κΈ°μ΅΄ μΈν„°νμ΄μ¤λ¥Ό λ³€κ²½ν•μ§€λ” μ•μ§€λ§, μƒλ΅μ΄ κµ¬ν„μ²΄λ¥Ό λ§λ“¤μ–΄ ν™•μ¥μ€ ν•κ³  μμ.
  - OCP μ›μΉ™μ„ μ§€ν‚¤κΈ° μ„ν•΄ DI, IoC μ»¨ν…μ΄λ„ λ“± μ¤ν”„λ§ κΈ°μ μ΄ ν•„μ”.
- LSP: λ¦¬μ¤μ½”ν”„ μΉν™ μ›μΉ™ (Liskov substitution principle)
  - ν”„λ΅κ·Έλ¨μ κ°μ²΄λ” ν”„λ΅κ·Έλ¨μ μ •ν™•μ„±μ„ κΉ¨λ¨λ¦¬μ§€ μ•μΌλ©΄μ„ ν•μ„ νƒ€μ…μ μΈμ¤ν„΄μ¤λ΅ λ°”κΏ€ μ μμ–΄μ•Ό ν•λ‹¤.
  - λ‹¤ν•μ„±μ—μ„ ν•μ„ ν΄λμ¤λ” μΈν„°νμ΄μ¤ κ·μ•½μ„ λ‹¤ μ§€μΌμ•Ό ν•λ‹¤λ” κ²ƒ. (ex) μλ™μ°¨ μ—‘μ…€μ„ λ°μΌλ©΄ μ•μΌλ΅ κ°€μ•Όν•λ‹¤λ” κ·μ•½μ΄ μλ™μ°¨ μΈν„°νμ΄μ¤μ— μμ–΄μ•Ό ν•λ‹¤.)
- ISP: μΈν„°νμ΄μ¤ λ¶„λ¦¬ μ›μΉ™ (Interface segregation principle)
  - νΉμ • ν΄λΌμ΄μ–ΈνΈλ¥Ό μ„ν• μΈν„°νμ΄μ¤ μ—¬λ¬ κ°κ°€ λ²”μ© μΈν„°νμ΄μ¤ ν•λ‚λ³΄λ‹¤ λ‚«λ‹¤.
- DIP: μμ΅΄κ΄€κ³„ μ—­μ „ μ›μΉ™ (Dependency inversion principle)
  - ν”„λ΅κ·Έλλ¨Έλ” β€μ¶”μƒν™”μ— μμ΅΄ν•΄μ•Όμ§€, κµ¬μ²΄ν™”μ— μμ΅΄ν•λ©΄ μ•λλ‹¤.β€ μμ΅΄μ„± μ£Όμ…μ€ μ΄ μ›μΉ™μ„ λ”°λ¥΄λ” λ°©λ²• μ¤‘ ν•λ‚λ‹¤.
  - κµ¬ν„ ν΄λμ¤μ— μμ΅΄ν•μ§€ λ§κ³ , μΈν„°νμ΄μ¤μ— μμ΅΄ν•΄μ•Ό ν•λ‹¤. 

### κ°μ²΄ μ§€ν–¥ μ„¤κ³„μ™€ μ¤ν”„λ§
μ¤ν”„λ§μ€ λ‹¤μ κΈ°μ κ³Ό λ‹¤ν•μ„± + OCP, DIPλ¥Ό κ°€λ¥ν•κ² μ§€μ›
- DI: μμ΅΄κ΄€κ³„ μ£Όμ…
- DI μ»¨ν…μ΄λ„ μ κ³µ

***
## #2. μ¤ν”„λ§ ν•µμ‹¬ μ›λ¦¬ μ΄ν•΄ 1 (μμ  λ§λ“¤κΈ°)

### λΉ„μ¦λ‹μ¤ μ”κµ¬μ‚¬ν•­κ³Ό μ„¤κ³„
- νμ›
  - νμ› κΈ°λ¥: κ°€μ…, μ΅°ν
  - νμ› μ—”ν‹°ν‹°: id, μ΄λ¦„, λ“±κΈ‰(VIP, BASIC)
  - `νμ› λ°μ΄ν„° μ €μ¥μ†λ” λ―Έν™•μ •`
- μ£Όλ¬Έκ³Ό ν• μΈ μ •μ±…
  - νμ› λ“±κΈ‰μ— λ”°λΌ ν• μΈ μ •μ±…μ„ μ μ©
  - `ν• μΈ μ •μ±…μ€ μ •μ•΅ ν• μΈμΌλ΅ ν•  μ§€, μ •μ¨ ν• μΈμΌλ΅ ν•  μ§€ λ―Έν™•μ •` 

### νμ›, μ£Όλ¬Έ, ν• μΈ λ„λ©”μΈ μ„¤κ³„
- νμ› λ„λ©”μΈ
1) MemberService μΈν„°νμ΄μ¤μ™€ MemberServiceImpl κµ¬ν„ κ°μ²΄
2) MemberRepository μΈν„°νμ΄μ¤μ™€ MemoryMemberRepository, DbMemberRepository κµ¬ν„ κ°μ²΄

β— μ΄λ• MemberServiceImplμ€ `private final MemberRepository memberRepository = new MemoryMemberRepository();` μ™€ κ°™μ΄ μΈν„°νμ΄μ¤ λΏ μ•„λ‹λΌ κµ¬ν„κΉμ§€ λ¨λ‘ μμ΅΄ν•κ³  μμ

- μ£Όλ¬Έ λ„λ©”μΈ
1) OrderService μΈν„°νμ΄μ¤μ™€ OrderServiceImpl κµ¬ν„ κ°μ²΄ -> νμ› μ΅°ν, ν• μΈ μ μ© λ‘ κ°€μ§€ κΈ°λ¥
2) νμ› μ΅°ν - MemberRepository μΈν„°νμ΄μ¤μ™€ MemoryMemberRepository, DbMemberRepository κµ¬ν„ κ°μ²΄
3) ν• μΈ μ μ© - DiscountPolicy μΈν„°νμ΄μ¤μ™€ FixDiscountPolicy, RateDiscountPolicy κµ¬ν„ κ°μ²΄

π‘ **μ—­ν• κ³Ό κµ¬ν„μ„ λ¶„λ¦¬**ν•΄μ„ λ‹¤ν•μ„±μ„ μ μ©ν• μ„¤κ³„. μμ λ΅μ΄ κµ¬ν„ κ°μ²΄μ μ΅°λ¦½(λ³€κ²½)μ΄ κ°€λ¥ν•΄μ§„λ‹¤! 

***
## #3. μ¤ν”„λ§ ν•µμ‹¬ μ›λ¦¬ μ΄ν•΄ 2 (κ°μ²΄ μ§€ν–¥ μ›λ¦¬ μ μ©)

### λ¬Έμ μ  λ°κ²¬

β… μ—­ν• κ³Ό κµ¬ν„μ„ μ¶©μ‹¤ν•κ² λ¶„λ¦¬ν–λ‹¤. 

β… λ‹¤ν•μ„±μ„ ν™μ©ν•΄ μΈν„°νμ΄μ¤μ™€ κµ¬ν„ κ°μ²΄λ¥Ό λ¶„λ¦¬ν–λ‹¤.

β κ·Έλ°λ°...**OCP, DIP** λ¥Ό μ¤€μν•μ§€ μ•μ•λ‹¤! β

ν„μ¬ OrderServiceImpl μ½”λ“λ¥Ό μ‚΄ν΄λ³΄μ.

```
public class OrderServiceImpl implements OrderService{

    private final MemberRepository memberRepository = new MemoryMemberRepository();
    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
```

β— DIP μ„λ°: μ£Όλ¬Έ μ„λΉ„μ¤ ν΄λΌμ΄μ–ΈνΈ(OrderServiceImpl)μ€ DisCountPolicy μΈν„°νμ΄μ¤μ™€ FixDiscountPolicyλΌλ” κµ¬μ²΄ ν΄λμ¤μ— λ¨λ‘ μμ΅΄ν•κ³  μλ‹¤. (MemberRepositoryλ„ λ§μ°¬κ°€μ§€)

β— OCP μ„λ°: μ •μ•΅μ΄ μ•„λ‹ μ •μ¨ ν• μΈ μ •μ±…μΌλ΅ κΈ°λ¥μ„ ν™•μ¥ν•΄μ„ λ³€κ²½ν•λ ¤λ©΄ ν΄λΌμ΄μ–ΈνΈ μ½”λ“ μ—­μ‹ λ³€κ²½ν•΄μ•Ό ν•λ‹¤.

λ¬Έμ λ¥Ό ν•΄κ²°ν•λ ¤λ©΄? **μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅ μ„¤κ³„λ¥Ό λ³€κ²½ν•μ!**

```
public class OrderServiceImpl implements OrderService{

    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;
```

β“ κ·Έλ°λ° κµ¬ν„μ²΄κ°€ μ—†λ‹¤. -> NPEκ°€ λ°μƒν•μ§€ μ•μΌλ ¤λ©΄ ν΄λΌμ΄μ–ΈνΈμΈ OrderServiceImplμ— **κµ¬ν„ κ°μ²΄λ¥Ό λ€μ‹  μƒμ„± λ° μ£Όμ…**ν•΄μ£Όμ–΄μ•Ό ν•λ‹¤!

### κ΄€μ‹¬μ‚¬μ λ¶„λ¦¬
- κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  μ—°κ²°ν•λ” μ±…μ„μ„ κ°€μ§€λ” λ³„λ„μ μ„¤μ • ν΄λμ¤ AppConfigλ¥Ό λ§λ“ λ‹¤. 
- AppConfigλ” μ‹¤μ  λ™μ‘μ— ν•„μ”ν• κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•΄μ£Όκ³ , μƒμ„±ν• κ°μ²΄ μΈμ¤ν„΄μ¤μ μ°Έμ΅°λ¥Ό μƒμ„±μλ¥Ό ν†µν•΄μ„ μ£Όμ…ν•΄μ¤€λ‹¤.
  - MemberServiceImpl -> memoryMemberRepository
  - OrderServiceImpl -> MemoryMemberRepository, FixDiscountPolicy

```
public class MemberServiceImpl implements MemberService{

    private final MemberRepository memberRepository;

    public MemberServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }
```
- μ„¤κ³„ λ³€κ²½μΌλ΅ κµ¬μ²΄ κ°μ²΄κ°€ μ•„λ‹ μ¶”μƒν™”(μΈν„°νμ΄μ¤)μ—λ§ μμ΅΄ν•κ³  μλ‹¤. - DIP μ¤€μ
- MemberServiceImplμ€ μƒμ„±μλ¥Ό ν†µν•΄ μ–΄λ–¤ κµ¬ν„ κ°μ²΄κ°€ μ£Όμ…λ  μ§€ μ• μ μ—†κ³ , κµ¬ν„ κ°μ²΄μ μƒμ„±κ³Ό μ£Όμ…μ€ μ¤μ§ AppConfigκ°€ λ‹΄λ‹Ήν•΄ κ²°μ •ν•λ‹¤.
- MemberServiceImplμ€ κΈ°λ¥μ μ‹¤ν–‰μ—λ§ μ§‘μ¤‘ν•λ©΄ λλ‹¤! 

β“ μƒλ΅μ΄ ν• μΈ μ •μ±…μ„ μ μ©ν•κ³  μ‹¶λ‹¤λ©΄

- AppConfigμ λ“±μ¥μΌλ΅ μ• ν”λ¦¬μΌ€μ΄μ…μ€ **μ‚¬μ© μμ—­**κ³Ό **κµ¬μ„± μμ—­**μΌλ΅ λ¶„λ¦¬λμ—λ‹¤.
- FixDiscountPolicyλ¥Ό RateDiscountPolicyλ΅ λ³€κ²½ν•κ³  μ‹¶λ‹¤λ©΄, κµ¬μ„± μμ—­λ§ λ³€κ²½ν•λ©΄ λλ‹¤. μ¦‰, μ‚¬μ© μμ—­μ€ μ „ν€ μν–¥μ„ λ°›μ§€ μ•λ”λ‹¤. - OCP μ¤€μ

### IoC μ»¨ν…μ΄λ„, DI μ»¨ν…μ΄λ„
- AppConfigμ²λΌ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  κ΄€λ¦¬ν•λ©° μμ΅΄ κ΄€κ³„λ¥Ό μ—°κ²°ν•΄μ£Όλ” κ²ƒμ„ IoC μ»¨ν…μ΄λ„ λλ” DI μ»¨ν…μ΄λ„λΌκ³  ν•λ‹¤.
- AppConfigλ¥Ό μ¤ν”„λ§ κΈ°λ°μΌλ΅ λ³€κ²½ν•λ ¤λ©΄ AppConfigμ— @Configurationμ„, κ° λ©”μ†λ“μ @Beanμ„ λ¶™μ—¬ μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— λΉμΌλ΅ λ“±λ΅ν•΄μ£Όλ©΄ λλ‹¤.
- μ΄μ  μ¤ν”„λ§ μ»¨ν…μ΄λ„ ApplicationContextμ—μ„ ν•„μ”ν• μ¤ν”„λ§ λΉμ„ μ°Ύμ•„ μ‚¬μ©ν•  μ μλ‹¤.
